# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞: –ë–æ—Ç—ã –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –±–æ—Ç–æ–≤

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∏–ø–æ–º "–±–æ—Ç" —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–∞–±–ª–∏—Ü–µ `users` —Å —Ñ–ª–∞–≥–æ–º `is_bot: true`, –Ω–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `bots`. –ü–æ—ç—Ç–æ–º—É –±–æ—Ç –Ω–µ –ø–æ—è–≤–ª—è–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ –±–æ—Ç–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## üîß –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UserManager

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `BotRepository` –≤ `UserManager`:

```go
type UserManager struct {
    userRepo *repository.UserRepository
    botRepo  *repository.BotRepository  // –î–æ–±–∞–≤–ª–µ–Ω–æ
    logger   *zap.Logger
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ UserManager

```go
func NewUserManager(userRepo *repository.UserRepository, botRepo *repository.BotRepository) *UserManager {
    return &UserManager{
        userRepo: userRepo,
        botRepo:  botRepo,  // –î–æ–±–∞–≤–ª–µ–Ω–æ
        logger:   logger.GetLogger(),
    }
}
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ CreateUser

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–±–æ—Ç–∞ —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `bots`:

```go
// –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –±–æ—Ç–æ–º, —Å–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ –±–æ—Ç–æ–≤
if user.IsBot {
    bot := &models.Bot{
        ID:         user.ID,
        Name:       user.GetFullName(),
        Username:   user.Username,
        Token:      "", // –¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∂–µ
        WebhookURL: "",
        IsActive:   true,
        CreatedAt:  time.Now(),
        UpdatedAt:  time.Now(),
    }

    if err := m.botRepo.Create(bot); err != nil {
        m.logger.Error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –±–æ—Ç–∞", zap.Error(err))
        // –ù–µ —É–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
    } else {
        m.logger.Info("–°–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å –±–æ—Ç–∞", 
            zap.String("bot_id", bot.ID),
            zap.String("username", bot.Username))
    }
}
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ DeleteUser

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–±–æ—Ç–∞ —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `bots`:

```go
// –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –±–æ—Ç–æ–º, —É–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –±–æ—Ç–∞
if user.IsBot {
    if err := m.botRepo.Delete(id); err != nil {
        m.logger.Error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –±–æ—Ç–∞", zap.String("id", id), zap.Error(err))
        // –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
    } else {
        m.logger.Info("–ó–∞–ø–∏—Å—å –±–æ—Ç–∞ —É–¥–∞–ª–µ–Ω–∞", zap.String("id", id))
    }
}
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–û–±–Ω–æ–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ `UserManager` –≤ `cmd/emulator/main.go`:

```go
userManager := emulator.NewUserManager(userRepo, botRepo)  // –î–æ–±–∞–≤–ª–µ–Ω botRepo
```

### 6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CreateBotModal

–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CreateBotModal.jsx` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–ª–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (—Ç–æ–∫–µ–Ω, webhook URL).

### 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ BotManager

–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `CreateBotModal`.

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∏–ø–æ–º "–±–æ—Ç":

1. **–°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –≤ —Ç–∞–±–ª–∏—Ü–µ `users` —Å `is_bot: true`
2. **–°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –±–æ—Ç–∞** –≤ —Ç–∞–±–ª–∏—Ü–µ `bots` —Å –ø—É—Å—Ç—ã–º —Ç–æ–∫–µ–Ω–æ–º –∏ webhook URL
3. **–ë–æ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è** –≤ —Å–ø–∏—Å–∫–µ –±–æ—Ç–æ–≤ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. **–ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å** —Ç–æ–∫–µ–Ω –∏ webhook URL —á–µ—Ä–µ–∑ API –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ API
```bash
curl -X POST http://localhost:3001/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "test_bot",
    "first_name": "Test",
    "last_name": "Bot",
    "is_bot": true
  }'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –±–æ—Ç–æ–≤
```bash
curl http://localhost:3001/api/bots
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
```bash
curl -X PUT http://localhost:3001/api/bots/{bot_id} \
  -H "Content-Type: application/json" \
  -d '{
    "token": "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"
  }'
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–¢–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ `users` –∏ `bots` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:

- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–±–æ—Ç–∞ ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `bots`
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–±–æ—Ç–∞ ‚Üí —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –∏–∑ `bots`
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–±–æ—Ç–∞ ‚Üí –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `bots`

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –¢–æ–∫–µ–Ω –∏ webhook URL –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—É—Å—Ç—ã–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ
- –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –±–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –±–æ—Ç–æ–≤
