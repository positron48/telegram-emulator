# –ü—Ä–∏–º–µ—Ä—ã –±–æ—Ç–æ–≤ –¥–ª—è Telegram Emulator

[English](README_EN.md) | –†—É—Å—Å–∫–∏–π

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –±–æ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å Telegram Emulator API.

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Python –±–æ—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.7+
- requests
- flask (–¥–ª—è webhook —Ä–µ–∂–∏–º–∞)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install requests flask
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Telegram Emulator**
   ```bash
   cd /path/to/telegram-emulator
   make dev
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**
   - –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏"
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–æ–º `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç**
   ```bash
   cd examples
   python simple_bot.py
   ```

4. **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã**
   ```
   ü§ñ Telegram Emulator Bot
   ========================================
   –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:
   1. Polling (–æ–±—ã—á–Ω—ã–π)
   2. Long Polling (30s)
   3. Webhook
   4. –í—ã—Ö–æ–¥

   –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ä–µ–∂–∏–º–∞ (1-4):
   ```

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

#### 1. Polling (–æ–±—ã—á–Ω—ã–π)
- –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤

#### 2. Long Polling (30s)
- –ë–æ—Ç –∂–¥–µ—Ç –Ω–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Telegram Bot API

#### 3. Webhook
- –≠–º—É–ª—è—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Flask —Å–µ—Ä–≤–µ—Ä
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –¢—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
- `/echo <—Ç–µ–∫—Å—Ç>` - –≠—Ö–æ-–æ—Ç–≤–µ—Ç

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç offset –≤ —Ñ–∞–π–ª
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –§–∞–π–ª: `bot_offset_{bot_id}.txt`

#### Webhook —Å–µ—Ä–≤–µ—Ä
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Flask —Å–µ—Ä–≤–µ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ
- Graceful shutdown —Å —É–¥–∞–ª–µ–Ω–∏–µ–º webhook
- Health check endpoint: `/health`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

Telegram Emulator –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã Telegram Bot API:

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
```http
GET /bot{token}/getMe
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```http
GET /bot{token}/getUpdates?offset=0&limit=100&timeout=30
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```http
POST /bot{token}/sendMessage
Content-Type: application/json

{
  "chat_id": "123456789",
  "text": "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!",
  "parse_mode": "HTML"
}
```

### Webhook
```http
POST /bot{token}/setWebhook
Content-Type: application/json

{
  "url": "https://your-server.com/webhook"
}
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
   - –ó–∞–ø–∏—à–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π Telegram Bot API –±–∏–±–ª–∏–æ—Ç–µ–∫—É**
   - python-telegram-bot
   - aiogram
   - telebot
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ URL —ç–º—É–ª—è—Ç–æ—Ä–∞**
   - –ó–∞–º–µ–Ω–∏—Ç–µ `api.telegram.org` –Ω–∞ `localhost:3001`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

## –ü—Ä–∏–º–µ—Ä —Å python-telegram-bot

```python
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters

def start(update, context):
    update.message.reply_text('–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ.')

def echo(update, context):
    update.message.reply_text(update.message.text)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –¥–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞
updater = Updater(
    token='YOUR_BOT_TOKEN',
    base_url='http://localhost:3001',
    use_context=True
)

dispatcher = updater.dispatcher
dispatcher.add_handler(CommandHandler("start", start))
dispatcher.add_handler(MessageHandler(Filters.text & ~Filters.command, echo))

updater.start_polling()
updater.idle()
```

## –û—Ç–ª–∞–¥–∫–∞

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏"
- –î–ª—è webhook —Ä–µ–∂–∏–º–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Flask —Å–µ—Ä–≤–µ—Ä–∞

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- ‚úÖ Polling —Ä–µ–∂–∏–º (–æ–±—ã—á–Ω—ã–π –∏ long polling)
- ‚úÖ Webhook —Ä–µ–∂–∏–º —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –≠–º—É–ª—è—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —á–∞—Ç—ã
- ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã) –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- Inline –∫–Ω–æ–ø–∫–∏ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Telegram API –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
